#!/bin/bash
# 修复麦克风设备问题脚本

echo "🔧 macOS 麦克风设备修复指南"
echo "============================================================"
echo ""

echo "❌ 未找到麦克风设备的原因："
echo "   1. 麦克风硬件未连接"
echo "   2. 系统未识别麦克风"
echo "   3. 输入设备未正确配置"
echo ""

echo "📋 解决步骤："
echo ""
echo "1️⃣  检查硬件连接"
echo "   - 确保麦克风已正确连接到 Mac"
echo "   - 如果是 USB 麦克风，检查 USB 连接"
echo "   - 如果是蓝牙麦克风，检查蓝牙连接"
echo ""

echo "2️⃣  检查系统声音设置"
echo "   系统设置 → 声音 → 输入"
echo "   - 查看是否有可用的输入设备"
echo "   - 选择正确的输入设备"
echo "   - 检查输入音量是否正常"
echo ""

echo "3️⃣  测试麦克风"
echo "   - 在系统设置 → 声音 → 输入中"
echo "   - 对着麦克风说话，查看输入电平是否变化"
echo "   - 如果没有反应，可能是硬件问题"
echo ""

echo "4️⃣  重启音频服务（如果设备已连接但无法识别）"
echo "   - 重启 Mac"
echo "   - 或断开并重新连接麦克风"
echo ""

echo "============================================================"
echo "正在打开声音设置..."
echo ""

# 打开系统设置到声音输入页面
open "x-apple.systempreferences:com.apple.preference.sound?Input"

echo "✅ 已打开声音设置"
echo ""
echo "💡 检查清单："
echo "   □ 输入设备列表中是否有麦克风？"
echo "   □ 是否选择了正确的输入设备？"
echo "   □ 输入音量是否正常？"
echo "   □ 对着麦克风说话时，输入电平是否变化？"
echo ""
echo "🔄 修复后，重新启动 Electron 应用即可"

